09-02: Theme System with Dark/Light Mode

## Goal
Build theme system supporting automatic dark/light mode switching.

## Requirements
- DSGN-02: Theme system supports automatic dark/light mode switching

## Success Criteria
1. Theme persists across sessions
2. Respects system preference by default
3. Manual toggle available in settings
4. Smooth transitions between themes
5. All components support both themes

## Theme Structure

### Light Theme
```typescript
{
  background: '#ffffff',
  foreground: '#111827',
  card: '#ffffff',
  cardForeground: '#111827',
  primary: '#2563eb',
  primaryForeground: '#ffffff',
  secondary: '#f3f4f6',
  secondaryForeground: '#374151',
  muted: '#f9fafb',
  mutedForeground: '#6b7280',
  accent: '#2563eb',
  border: '#e5e7eb',
  input: '#e5e7eb',
  ring: '#2563eb',
}
```

### Dark Theme
```typescript
{
  background: '#111827',
  foreground: '#f9fafb',
  card: '#1f2937',
  cardForeground: '#f9fafb',
  primary: '#3b82f6',
  primaryForeground: '#ffffff',
  secondary: '#374151',
  secondaryForeground: '#d1d5db',
  muted: '#1f2937',
  mutedForeground: '#9ca3af',
  accent: '#3b82f6',
  border: '#374151',
  input: '#374151',
  ring: '#3b82f6',
}
```

## Implementation

### Theme Context
```typescript
interface Theme {
  name: 'light' | 'dark' | 'system';
  resolvedTheme: 'light' | 'dark';
  setTheme: (theme: 'light' | 'dark' | 'system') => void;
}
```

### useTheme Hook
```typescript
export function useTheme() {
  const [theme, setTheme] = useState<ThemeName>('system');
  const [resolvedTheme, setResolvedTheme] = useState<ThemeName>('light');

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove('light', 'dark');
    root.classList.add(resolvedTheme);
  }, [resolvedTheme]);

  return { theme, resolvedTheme, setTheme };
}
```

### ThemeProvider Component
```typescript
export function ThemeProvider({ children }: { children: React.ReactNode }) {
  // Handles theme persistence and system preference detection
  // Adds 'light' or 'dark' class to html element
}
```

## System Preference Detection

### MediaQuery Hook
```typescript
export function useMediaQuery(query: string): boolean {
  const [matches, setMatches] = useState(() => {
    if (typeof window !== 'undefined') {
      return window.matchMedia(query).matches;
    }
    return false;
  });

  useEffect(() => {
    const media = window.matchMedia(query);
    const listener = () => setMatches(media.matches);
    media.addEventListener('change', listener);
    return () => media.removeEventListener('change', listener);
  }, [query]);

  return matches;
}

export function useSystemTheme(): 'light' | 'dark' {
  const isDark = useMediaQuery('(prefers-color-scheme: dark)');
  return isDark ? 'dark' : 'light';
}
```

## Tailwind Configuration

### Dark Mode Strategy
```javascript
// tailwind.config.js
module.exports = {
  darkMode: 'class', // Manual toggle with class
  theme: {
    extend: {
      colors: {
        background: 'var(--background)',
        foreground: 'var(--foreground)',
        // ... all theme colors as CSS variables
      },
    },
  },
}
```

### CSS Variables
```css
/* index.css */
:root {
  --background: 0 0% 100%;
  --foreground: 0 0% 3.9%;
  /* ... light theme colors */
}

.dark {
  --background: 0 0% 3.9%;
  --foreground: 0 0% 98%;
  /* ... dark theme colors */
}
```

## Smooth Transitions
```css
* {
  transition-property: background-color, border-color, color, fill, stroke;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 200ms;
}
```

## Files to Create
- `packages/ui/src/theme/tokens.ts` - Theme color tokens
- `packages/ui/src/theme/provider.tsx` - ThemeProvider component
- `packages/ui/src/hooks/useTheme.ts` - useTheme hook
- `apps/portal/src/index.css` - CSS variables for themes

## Files to Modify
- `tailwind.config.js` - Add dark mode and theme colors
- `apps/portal/src/App.tsx` - Wrap with ThemeProvider

## Notes
- Use localStorage to persist theme preference
- Default to 'system' for automatic switching
- Theme class on html element for Tailwind dark mode
- Avoid !important for theme variables
- Test all components in both themes
