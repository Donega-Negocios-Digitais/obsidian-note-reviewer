# 11-01: Configure Vercel Project with GitHub Integration

## Goal
Set up Vercel project connected to GitHub repository for automatic deployments.

## Requirements
- DEPL-01: Application deploys successfully to Vercel from Git repository

## Success Criteria
1. Vercel project is created and connected to GitHub repo
2. Automatic deployment on push to main branch
3. Build configuration is correct for all apps
4. Preview deployments work for pull requests

## Implementation Steps

### 1. Install Vercel CLI
```bash
bun add -D vercel
```

### 2. Create Vercel Configuration
```typescript
// vercel.json
{
  "buildCommand": "bun run build",
  "outputDirectory": "apps/portal/dist",
  "installCommand": "bun install",
  "framework": null,
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

### 3. Configure Monorepo Settings
```typescript
// vercel.json - extended for monorepo
{
  "buildCommand": "bun run build",
  "installCommand": "bun install",
  "projects": [
    {
      "name": "portal",
      "root": "apps/portal",
      "framework": "vite"
    },
    {
      "name": "hook",
      "root": "apps/hook",
      "framework": null
    }
  ]
}
```

### 4. Add Environment Variables Template
```bash
# .env.example
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
VITE_STRIPE_PUBLISHABLE_KEY=your_stripe_key
VITE_STRIPE_PRICE_PRO_MONTHLY=price_id
VITE_STRIPE_PRICE_PRO_YEARLY=price_id
VITE_STRIPE_PRICE_LIFETIME=price_id
```

### 5. Configure Gitignore
```
# Ensure .vercel is not committed
.vercel/
```

### 6. Deploy via CLI
```bash
vercel link
vercel --prod
```

## Files to Create
- `vercel.json` - Vercel configuration
- `.env.example` - Environment variables template
- `.vercelignore` - Files to exclude from deployment

## Files to Modify
- `package.json` - Add deployment scripts

## Vercel Dashboard Steps
1. Go to vercel.com
2. Click "Add New Project"
3. Import GitHub repository
4. Configure project settings:
   - Framework Preset: Vite
   - Root Directory: apps/portal
   - Build Command: bun run build
   - Output Directory: dist
5. Add environment variables
6. Deploy

## Notes
- Vercel automatically detects Vite projects
- Monorepo setup requires specifying root directory
- Preview URLs available for PRs
- Automatic deployments on git push
