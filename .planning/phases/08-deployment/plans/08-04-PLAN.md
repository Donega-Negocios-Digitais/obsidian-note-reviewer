08-04: Set Up Production Environment Variables

## Goal
Configure production environment variables in Vercel with proper secrets management.

## Requirements
- DEPL-04: Environment variables are configured for production with proper secrets management

## Success Criteria
1. All required environment variables are set in Vercel
2. Secrets are properly managed (not committed to git)
3. Development and production environments are separated
4. Build succeeds with all environment variables

## Implementation Steps

### 1. Create Environment Variable Documentation
```markdown
# Environment Variables

## Required
- VITE_SUPABASE_URL
- VITE_SUPABASE_ANON_KEY

## Optional
- VITE_STRIPE_PUBLISHABLE_KEY
- VITE_STRIPE_PRICE_PRO_MONTHLY
- VITE_STRIPE_PRICE_PRO_YEARLY
- VITE_STRIPE_PRICE_LIFETIME
```

### 2. Configure Vercel Environment Variables
1. Go to Vercel Project → Settings → Environment Variables
2. Add variables for Production, Preview, and Development

### 3. Set Production Variables
```
# Supabase
VITE_SUPABASE_URL=production_supabase_url
VITE_SUPABASE_ANON_KEY=production_supabase_anon_key

# Stripe
VITE_STRIPE_PUBLISHABLE_KEY=pk_live_...
VITE_STRIPE_PRICE_PRO_MONTHLY=price_live_...
VITE_STRIPE_PRICE_PRO_YEARLY=price_live_...
VITE_STRIPE_PRICE_LIFETIME=price_live_...

# App
VITE_APP_URL=https://r.alexdonega.com.br
```

### 4. Set Preview Variables
```
# Supabase (use test project or same as prod)
VITE_SUPABASE_URL=...
VITE_SUPABASE_ANON_KEY=...

# Stripe (use test keys)
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_...
VITE_STRIPE_PRICE_PRO_MONTHLY=price_test_...
VITE_STRIPE_PRICE_PRO_YEARLY=price_test_...
VITE_STRIPE_PRICE_LIFETIME=price_test_...
```

### 5. Update .env.example
```bash
# Supabase
VITE_SUPABASE_URL=your_supabase_url_here
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Stripe
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_...
VITE_STRIPE_PRICE_PRO_MONTHLY=price_...
VITE_STRIPE_PRICE_PRO_YEARLY=price_...
VITE_STRIPE_PRICE_LIFETIME=price_...

# Application
VITE_APP_URL=http://localhost:5173
```

### 6. Create .env.local for Development
```bash
# .env.local (not committed)
VITE_SUPABASE_URL=http://localhost:54321
VITE_SUPABASE_ANON_KEY=local_dev_key
VITE_APP_URL=http://localhost:5173
```

### 7. Update .gitignore
```
# Environment variables
.env
.env.local
.env.production.local
.env.development.local
.env.test.local
```

## Files to Create
- `.env.example` - Template for developers
- `.env.development` - Development defaults (optional)
- `docs/ENVIRONMENT_VARIABLES.md` - Documentation

## Files to Modify
- `.gitignore` - Ensure .env* files are ignored

## Environment Variable Reference

### Supabase
| Variable | Description | Example |
|----------|-------------|---------|
| VITE_SUPABASE_URL | Supabase project URL | https://xxx.supabase.co |
| VITE_SUPABASE_ANON_KEY | Supabase anonymous key | eyJhbGc... |

### Stripe
| Variable | Description | Example |
|----------|-------------|---------|
| VITE_STRIPE_PUBLISHABLE_KEY | Stripe publishable key | pk_live_... |
| VITE_STRIPE_PRICE_PRO_MONTHLY | Price ID for monthly | price_live_... |
| VITE_STRIPE_PRICE_PRO_YEARLY | Price ID for yearly | price_live_... |
| VITE_STRIPE_PRICE_LIFETIME | Price ID for lifetime | price_live_... |

### Application
| Variable | Description | Example |
|----------|-------------|---------|
| VITE_APP_URL | Application base URL | https://r.alexdonega.com.br |

## Security Best Practices

### Secrets Management
- Never commit .env files to git
- Use .env.example as template
- Rotate keys regularly
- Use different keys for dev/prod

### Vercel Specific
- Environment variables are encrypted
- Use separate environments (Production, Preview, Development)
- Sensitive values hidden in UI
- Available during build time only (VITE_* prefix)

### Supabase
- Use Row Level Security (RLS)
- Restrict anon key permissions
- Use service role key only server-side
- Enable MFA on Supabase account

### Stripe
- Use test keys for development
- Use live keys for production only
- Set up webhooks with signature verification
- Monitor for suspicious activity

## Verification

### Check Build
```bash
# Local build with variables
bun run build

# Check if variables are available
console.log(import.meta.env.VITE_SUPABASE_URL)
```

### Check Deployment
- Vercel deployment logs show build variables
- Preview deployments use preview variables
- Production uses production variables
- Check browser console for loaded variables

## Production Checklist
- [ ] All required variables set in Vercel
- [ ] Production values used (not test/placeholder)
- [ ] .env files not committed to git
- [ ] .env.example is up to date
- [ ] Build succeeds in Vercel
- [ ] App loads in production
- [ ] Supabase connection works
- [ ] Stripe checkout works (if enabled)
- [ ] Preview deployments work

## Notes
- VITE_ prefix makes variables available to client code
- Server-only variables should not use VITE_ prefix
- Variables are injected at build time
- Changes require redeployment to take effect
- Preview deployments can use separate Supabase project for isolation
