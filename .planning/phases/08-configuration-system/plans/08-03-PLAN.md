---
phase: 08-configuration-system
plan: 03
type: execute
wave: 3
depends_on: [08-02]
files_modified: [packages/ui/components/SettingsPanel.tsx]
autonomous: true

must_haves:
  truths:
    - "All 5 content categories have redesigned form layouts"
    - "Each setting has clear label and helper text"
    - "Settings save immediately on change or with clear Save button"
    - "Changes persist across browser sessions"
    - "Visual feedback shown for successful saves"
  artifacts:
    - path: "packages/ui/components/SettingsPanel.tsx"
      provides: "Redesigned category settings with improved UX"
      contains: "CategoryContent component with Apple-style form layouts"
  key_links:
    - from: "CategoryContent component"
      to: "localStorage"
      via: "handlePathChange, handleTemplateChange"
      pattern: "setNoteTypePath|setNoteTypeTemplate"
    - from: "form inputs"
      to: "parent state"
      via: "onChange handlers"
      pattern: "handlePathChange|handleTemplateChange"
---

<objective>
Redesign the content-related settings categories (Regras, Workflows, Conte√∫do de Terceiros, Notas At√¥micas, Notas Organizacionais, Conte√∫do Pr√≥prio) with improved UX and Apple-style form design.

Purpose: Improve the usability of the 5 content configuration categories with better visual hierarchy, clear labels, helper text, and immediate or explicit save actions. These categories configure paths and templates for different note types.

Output: Redesigned CategoryContent component with Apple-style form layouts for all content categories.
</objective>

<execution_context>
@C:\Users\Alex\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\Alex\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-configuration-system/08-RESEARCH.md

@.planning/phases/08-configuration-system/plans/08-02-SUMMARY.md
@packages/ui/components/SettingsPanel.tsx
@packages/ui/utils/notePaths.ts
@packages/ui/utils/storage.ts
</context>

<tasks>

<task type="auto">
  <name>Redesign CategoryContent component with Apple-style forms</name>
  <files>packages/ui/components/SettingsPanel.tsx</files>
  <action>
Redesign the CategoryContent component (currently around lines 258-295) with improved visual design:

1. Update card design for each note type:
```tsx
// OLD - Current basic card:
<div className="space-y-4">
  {items.map(({ tipo, emoji, label }) => (
    <div key={tipo} className="space-y-2 p-4 bg-muted/30 rounded-lg border border-border/50">

// NEW - Apple-style card:
<div key={tipo} className="mb-4 last:mb-0">
  <div className="bg-card/50 rounded-xl border border-border/50 p-5 hover:border-border/80 transition-colors">
    {/* Header with emoji and title */}
    <div className="flex items-center gap-3 mb-4">
      <div className="w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center text-xl">
        {emoji}
      </div>
      <div>
        <h4 className="text-sm font-semibold text-foreground">{label}</h4>
        <p className="text-xs text-muted-foreground">Configure caminho e template</p>
      </div>
    </div>

    {/* Form fields with better spacing */}
    <div className="space-y-4">
      {/* Template field */}
      <div className="space-y-2">
        <label className="text-xs font-medium text-muted-foreground flex items-center gap-2">
          <span>Template</span>
          <span className="text-[10px] px-1.5 py-0.5 rounded bg-muted/50 text-muted-foreground/60">
            Opcional
          </span>
        </label>
        <div className="relative">
          <input
            type="text"
            value={noteTemplates[tipo] || ''}
            onChange={(e) => handleTemplateChange(tipo, e.target.value)}
            placeholder="C:/caminho/para/template.md"
            className="w-full px-3 py-2.5 bg-background rounded-lg text-sm border border-border focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none font-mono transition-all placeholder:text-muted-foreground/50"
          />
        </div>
        <p className="text-[11px] text-muted-foreground/70">
          Caminho para o arquivo de template usado para criar este tipo de nota
        </p>
      </div>

      {/* Destination field */}
      <div className="space-y-2">
        <label className="text-xs font-medium text-muted-foreground flex items-center gap-2">
          <span>Destino</span>
          <span className="text-[10px] px-1.5 py-0.5 rounded bg-primary/10 text-primary">
            Obrigat√≥rio
          </span>
        </label>
        <div className="relative">
          <input
            type="text"
            value={notePaths[tipo] || ''}
            onChange={(e) => handlePathChange(tipo, e.target.value)}
            placeholder="C:/caminho/para/pasta/destino"
            className="w-full px-3 py-2.5 bg-background rounded-lg text-sm border border-border focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none font-mono transition-all placeholder:text-muted-foreground/50"
          />
        </div>
        <p className="text-[11px] text-muted-foreground/70">
          Pasta onde as notas deste tipo ser√£o salvas
        </p>
      </div>
    </div>
  </div>
</div>
```

2. Key improvements:
   - Larger, more prominent emoji icons in rounded containers
   - Better visual hierarchy with headers and helper text
   - Required/Optional badges for fields
   - Increased padding and spacing (16px-24px)
   - Hover states on cards
   - Better focus states on inputs (ring-2 ring-primary/20)
   - More descriptive helper text

3. Apply to all 5 content categories:
   - üìö Conte√∫do de Terceiros (terceiros)
   - ‚öõÔ∏è Notas At√¥micas (atomica)
   - üó∫Ô∏è Notas Organizacionais (organizacional)
   - ‚úçÔ∏è Conte√∫do Pr√≥prio (alex)
   - (Note: 'regras' uses ConfigEditor, handled separately)

Update the CategoryContent component to use this new design.
  </action>
  <verify>CategoryContent component has new Apple-style card design with emoji containers, helper text, required/optional badges, and improved spacing</verify>
  <done>All content category settings redesigned with improved visual hierarchy and UX</done>
</task>

<task type="auto">
  <name>Add visual feedback for save operations</name>
  <files>packages/ui/components/SettingsPanel.tsx</files>
  <action>
Add immediate visual feedback when settings are saved:

1. Add save feedback state:
```tsx
const [savedField, setSavedField] = useState<string | null>(null);

useEffect(() => {
  if (savedField) {
    const timer = setTimeout(() => setSavedField(null), 2000);
    return () => clearTimeout(timer);
  }
}, [savedField]);
```

2. Update handlers to show feedback:
```tsx
const handlePathChange = (tipo: string, path: string) => {
  setNotePaths(prev => ({ ...prev, [tipo]: path }));
  setNoteTypePath(tipo, path);
  setNotePath(path);
  onNotePathChange?.(path);

  // Show save feedback
  setSavedField(`${tipo}-path`);
};

const handleTemplateChange = (tipo: string, templatePath: string) => {
  setNoteTemplates(prev => ({ ...prev, [tipo]: templatePath }));
  setNoteTypeTemplate(tipo, templatePath);

  // Show save feedback
  setSavedField(`${tipo}-template`);
};
```

3. Add visual indicator in form fields:
```tsx
<div className="relative">
  <input
    type="text"
    value={notePaths[tipo] || ''}
    onChange={(e) => handlePathChange(tipo, e.target.value)}
    className={`
      w-full px-3 py-2.5 pr-10 bg-background rounded-lg text-sm
      border ${savedField === `${tipo}-path` ? 'border-green-500' : 'border-border'}
      focus:border-primary focus:ring-2 focus:ring-primary/20 focus:outline-none
      font-mono transition-all
    `}
  />
  {savedField === `${tipo}-path` && (
    <div className="absolute right-3 top-1/2 -translate-y-1/2">
      <svg className="w-4 h-4 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth={2}>
        <path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" />
      </svg>
    </div>
  )}
</div>
```

This shows a green checkmark briefly when a field is saved.
  </action>
  <verify>Settings inputs show green border and checkmark for 2 seconds after saving</verify>
  <done>Visual feedback implemented for all save operations</done>
</task>

<task type="auto">
  <name>Improve "Regras e Workflows" category (ConfigEditor)</name>
  <files>packages/ui/components/SettingsPanel.tsx, packages/ui/components/ConfigEditor.tsx</files>
  <action>
The 'regras' category currently uses ConfigEditor component. Ensure it fits the new slide-over panel design:

1. Check ConfigEditor.tsx for layout issues:
   - May need to adjust width to fit slide-over panel
   - Ensure it uses internal scrolling (overflow-y-auto)
   - Check if it needs responsive adjustments

2. If ConfigEditor needs updates:
   - Ensure max-width matches slide-over panel content area
   - Add proper padding for slide-over layout
   - Verify form styling matches Apple-style design

3. The 'regras' tab content in SettingsPanel:
```tsx
{activeTab === 'regras' ? (
  <div className="flex flex-col h-full overflow-y-auto">
    <div className="p-5">
      <ConfigEditor />
    </div>
  </div>
) : ...}
```

Read ConfigEditor.tsx and make any necessary adjustments to fit the new slide-over panel layout.
  </action>
  <verify>ConfigEditor displays properly within slide-over panel with appropriate width and scrolling</verify>
  <done>Regras e Workflows category properly integrated with new design</done>
</task>

</tasks>

<verification>
After completion, verify:
1. All 5 content categories have new Apple-style card design
2. Each setting has clear label and helper text
3. Required/Optional badges indicate field necessity
4. Visual feedback (green checkmark) shows when settings are saved
5. Settings persist across browser refresh
6. ConfigEditor displays properly in new layout
7. Form fields have proper focus states and hover effects
</verification>

<success_criteria>
1. CategoryContent component redesigned with Apple-style cards
2. All content categories (terceiros, atomica, organizacional, alex) use new design
3. Visual feedback for save operations implemented
4. ConfigEditor integrated properly
5. All settings persist correctly
</success_criteria>

<output>
After completion, create `.planning/phases/08-configuration-system/plans/08-03-SUMMARY.md` with:
- Redesigned category forms details
- Visual feedback implementation
- Any ConfigEditor adjustments made
- User experience improvements
</output>
