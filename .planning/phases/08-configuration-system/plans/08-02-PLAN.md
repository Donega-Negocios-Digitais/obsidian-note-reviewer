---
phase: 08-configuration-system
plan: 02
type: execute
wave: 2
depends_on: [08-01]
files_modified: [packages/ui/components/SettingsPanel.tsx, packages/editor/App.tsx]
autonomous: true

must_haves:
  truths:
    - "Settings panel opens as right sidebar slide-over (not full screen replacement)"
    - "Category navigation on left, settings content on right (Apple System Preferences style)"
    - "Smooth slide-in animation from right with backdrop"
    - "Close button (X) and ESC key dismiss the panel"
    - "Editor content remains visible behind the panel"
  artifacts:
    - path: "packages/ui/components/SettingsPanel.tsx"
      provides: "Redesigned slide-over settings panel"
      contains: "fixed inset-y-0 right-0, translate-x, backdrop, z-50"
    - path: "packages/editor/App.tsx"
      provides: "Editor with overlay panel (not conditional replacement)"
      contains: "SettingsPanel rendered alongside Editor, not replacing it"
  key_links:
    - from: "packages/editor/App.tsx"
      to: "packages/ui/components/SettingsPanel.tsx"
      via: "Component render (no longer conditional replacement)"
      pattern: "{isSettingsPanelOpen && <SettingsPanel />}"
    - from: "SettingsPanel.tsx"
      to: "Editor content"
      via: "z-index layering and backdrop"
      pattern: "z-50.*backdrop.*fixed inset"
---

<objective>
Redesign the settings panel as an Apple-style slide-over panel that opens from the right side, overlaying the editor rather than replacing it.

Purpose: Implement the critical UX improvement identified in 08-01 - settings should be accessible without losing context of the document being edited. Following Apple's System Preferences pattern with left sidebar for categories and right panel for content.

Output: Redesigned SettingsPanel.tsx with slide-over animation and updated Editor App.tsx integration.
</objective>

<execution_context>
@C:\Users\Alex\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\Alex\.claude\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-configuration-system/08-RESEARCH.md

@.planning/phases/08-configuration-system/plans/08-01-SUMMARY.md
@packages/ui/components/SettingsPanel.tsx
@packages/editor/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Redesign SettingsPanel as slide-over panel</name>
  <files>packages/ui/components/SettingsPanel.tsx</files>
  <action>
Completely redesign the SettingsPanel component to use slide-over pattern instead of full-screen replacement:

1. Add slide-over container structure (replace the current full-screen div):
```tsx
// Backdrop overlay
<div
  className={`
    fixed inset-0 bg-black/50 backdrop-blur-sm z-40
    transition-opacity duration-300
    ${isOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'}
  `}
  onClick={onClose}
/>

// Slide-over panel
<div
  className={`
    fixed inset-y-0 right-0
    w-full md:w-[480px] lg:w-[560px]
    bg-background shadow-2xl z-50
    transform transition-transform duration-300 ease-in-out
    ${isOpen ? 'translate-x-0' : 'translate-x-full'}
  `}
>
```

2. Implement Apple-style layout inside the panel:
   - Left sidebar (200px): Category list with icons and labels
   - Right panel (flex-1): Selected category's settings content
   - Fixed height: h-full with internal scrolling
   - Header with close button (X) in top-right

3. Update category tabs to sidebar navigation:
   - Vertical list on the left
   - Each item: emoji + label (hide label on mobile if needed)
   - Active category highlighted with bg-primary/10
   - Hover states for interactivity

4. Add keyboard shortcuts:
   - ESC key closes the panel
   - Use useEffect for global keydown listener

5. Keep all existing functionality:
   - All 8 categories
   - Import/Export/Padr√µes buttons in header
   - ModeToggle in header
   - All form inputs and handlers

DO NOT change the category content or functionality - only the layout and how it renders.
  </action>
  <verify>SettingsPanel.tsx has slide-over CSS classes (fixed inset-y-0 right-0, translate-x), backdrop div, and sidebar layout replacing the old full-screen pattern</verify>
  <done>SettingsPanel redesigned as slide-over with left sidebar for categories and right panel for content</done>
</task>

<task type="auto">
  <name>Update Editor App.tsx to render panel as overlay</name>
  <files>packages/editor/App.tsx</files>
  <action>
Change the editor integration from conditional replacement to overlay:

1. Find the current pattern (around line 788-799):
```tsx
// OLD - REMOVE THIS:
{isSettingsPanelOpen ? (
  <SettingsPanel ... />
) : (
  // Editor content
)}
```

2. Replace with overlay pattern:
```tsx
// NEW - Overlay approach:
<>
  {/* Editor always renders */}
  <header>...</header>
  <main>...</main>
  <AnnotationPanel .../>

  {/* Settings panel overlays on top */}
  {isSettingsPanelOpen && <SettingsPanel ... />}
</>
```

3. Update the conditional logic that hides sticky bar:
   - Current: !isSettingsPanelOpen in sticky bar condition
   - Keep this - sticky bar should hide when settings open

4. Verify settings button in header still works:
   - Lines 902-918: settings button toggles isSettingsPanelOpen
   - This should remain unchanged

5. Test keyboard shortcut:
   - Lines 502-506: ? key opens settings
   - This should still work with new overlay

The key change: SettingsPanel is now an overlay (z-50) instead of replacing the entire view.
  </action>
  <verify>App.tsx renders Editor and SettingsPanel simultaneously (not with ternary), SettingsPanel wrapped in {isSettingsPanelOpen && ...}</verify>
  <done>Editor integration updated - settings panel now overlays content instead of replacing it</done>
</task>

<task type="auto">
  <name>Add responsive mobile styling</name>
  <files>packages/ui/components/SettingsPanel.tsx</files>
  <action>
Ensure the slide-over panel works well on mobile devices:

1. Panel width responsive:
   - Mobile (<md): w-full (full screen)
   - Tablet (md): w-[480px]
   - Desktop (lg): w-[560px]

2. Sidebar behavior on mobile:
   - On very small screens, consider horizontal scroll for categories
   - Or collapse to icon-only with tooltips

3. Touch-friendly:
   - Minimum 44px touch targets for buttons
   - Close button easily tappable

4. Backdrop on mobile:
   - Full-screen backdrop with blur
   - Tap backdrop to close (already implemented)

5. Test responsive classes:
   - Use Tailwind's md: and lg: breakpoints
   - Ensure no horizontal scroll on body when panel opens

Apply these responsive improvements to the slide-over panel implementation.
  </action>
  <verify>SettingsPanel has responsive width classes (w-full md:w-[480px]) and mobile-friendly touch targets</verify>
  <done>Panel is fully responsive with appropriate behavior on mobile, tablet, and desktop</done>
</task>

</tasks>

<verification>
After completion, verify:
1. Settings panel slides in from right when opened
2. Editor content remains visible behind backdrop
3. Left sidebar shows all 8 category icons
4. Clicking category shows content in right panel
5. ESC key closes the panel
6. Close button (X) in header works
7. Panel is responsive on mobile (full width) and desktop (fixed width)
8. No horizontal scroll on body when panel is open
</verification>

<success_criteria>
1. SettingsPanel.tsx redesigned as slide-over panel
2. Apple-style layout with left sidebar and right content panel
3. Smooth slide-in animation (300ms ease-in-out)
4. Backdrop with blur effect
5. Editor integration uses overlay (not conditional replacement)
6. Responsive on mobile devices
7. All 8 categories still functional in new layout
</success_criteria>

<output>
After completion, create `.planning/phases/08-configuration-system/plans/08-02-SUMMARY.md` with:
- Slide-over implementation details
- Responsive design approach
- Any challenges encountered and solutions
- Screenshot references (if applicable)
</output>
