---
phase: 08-configuration-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/portal/src/pages/Settings.tsx
  - apps/portal/src/components/SettingsLayout.tsx
  - apps/portal/src/components/SettingsSection.tsx
  - apps/portal/src/components/SettingsItem.tsx
autonomous: false

must_haves:
  truths:
    - "Settings page has modern Apple-style design"
    - "Navigation uses sidebar with categorized sections"
    - "Each setting has clear label and description"
    - "Settings persist to localStorage"
    - "Clean typography and spacing"
  artifacts:
    - path: "apps/portal/src/pages/Settings.tsx"
      provides: "Main settings page"
      exports: ["Settings"]
      min_lines: 100
    - path: "apps/portal/src/components/SettingsLayout.tsx"
      provides: "Apple-style settings layout"
      exports: ["SettingsLayout", "SettingsSidebar"]
      min_lines: 150
    - path: "apps/portal/src/components/SettingsItem.tsx"
      provides: "Individual setting component"
      exports: ["SettingsItem", "SettingsToggle", "SettingsSelect"]
      min_lines: 120

<objective>
Design and build Apple-style settings page UI with modern design and proper navigation.

**Purpose:** Deliver CONF-01 requirement - settings page with modern Apple-style design.

**Output:** Complete settings page with sidebar navigation and reusable components.
</objective>

<tasks>

<task type="auto">
  <name>Create SettingsLayout component</name>
  <files>apps/portal/src/components/SettingsLayout.tsx</files>
  <action>
    Create `apps/portal/src/components/SettingsLayout.tsx`:

    ```typescript
    /**
     * Settings Layout Component
     *
     * Apple-style settings layout with sidebar navigation.
     */

    import React, { useState } from 'react';
    import { useNavigate, useLocation } from 'react-router-dom';

    export interface SettingsSection {
      id: string;
      title: string;
      icon: string;
      description?: string;
    }

    export interface SettingsLayoutProps {
      sections: SettingsSection[];
      children: React.ReactNode;
    }

    const DEFAULT_SECTIONS: SettingsSection[] = [
      { id: 'general', title: 'Geral', icon: '‚öôÔ∏è' },
      { id: 'appearance', title: 'Apar√™ncia', icon: 'üé®' },
      { id: 'annotations', title: 'Anota√ß√µes', icon: 'üìù' },
      { id: 'integration', title: 'Integra√ß√£o', icon: 'üîó' },
      { id: 'about', title: 'Sobre', icon: '‚ÑπÔ∏è' },
    ];

    /**
     * Apple-style settings layout with sidebar
     */
    export function SettingsLayout({
      sections = DEFAULT_SECTIONS,
      children,
    }: SettingsLayoutProps) {
      const location = useLocation();
      const navigate = useNavigate();

      // Get current section from URL path
      const currentSection = location.pathname.split('/').pop() || 'general';

      return (
        <div className="settings-layout min-h-screen bg-gray-50 dark:bg-gray-900">
          <div className="max-w-5xl mx-auto">
            {/* Header */}
            <div className="bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
              <div className="px-6 py-4">
                <h1 className="text-2xl font-semibold text-gray-900 dark:text-white">
                  Configura√ß√µes
                </h1>
              </div>
            </div>

            {/* Content */}
            <div className="flex">
              {/* Sidebar */}
              <aside className="w-64 flex-shrink-0 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700">
                <nav className="p-4 space-y-1">
                  {sections.map((section) => (
                    <button
                      key={section.id}
                      onClick={() => navigate(`/settings/${section.id}`)}
                      className={`
                        w-full flex items-center gap-3 px-4 py-2.5 rounded-lg text-left transition-colors
                        ${currentSection === section.id
                          ? 'bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400 font-medium'
                          : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'
                        }
                      `}
                    >
                      <span className="text-xl flex-shrink-0">{section.icon}</span>
                      <span className="truncate">{section.title}</span>
                    </button>
                  ))}
                </nav>
              </aside>

              {/* Main Content */}
              <main className="flex-1 p-8">
                {children}
              </main>
            </div>
          </div>
        </div>
      );
    }

    /**
     * Compact settings header for mobile
     */
    export interface SettingsHeaderProps {
      title: string;
      description?: string;
      onBack?: () => void;
    }

    export function SettingsHeader({ title, description, onBack }: SettingsHeaderProps) {
      return (
        <div className="mb-8">
          {onBack && (
            <button
              onClick={onBack}
              className="flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white mb-4 transition-colors"
            >
              <svg className="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
              </svg>
              Voltar
            </button>
          )}
          <h2 className="text-2xl font-semibold text-gray-900 dark:text-white">
            {title}
          </h2>
          {description && (
            <p className="mt-1 text-sm text-gray-500 dark:text-gray-400">
              {description}
            </p>
          )}
        </div>
      );
    }

    export default SettingsLayout;
    ```

    Save to `apps/portal/src/components/SettingsLayout.tsx`.
  </action>
  <verify>SettingsLayout component created</verify>
  <done>Settings layout component</done>
</task>

<task type="auto">
  <name>Create SettingsItem components</name>
  <files>apps/portal/src/components/SettingsItem.tsx</files>
  <action>
    Create `apps/portal/src/components/SettingsItem.tsx`:

    ```typescript
    /**
     * Settings Item Component
     *
     * Individual setting items following Apple design patterns.
     */

    import React from 'react';

    export interface SettingsItemProps {
      title: string;
      description?: string;
      icon?: string;
      action?: React.ReactNode;
      onClick?: () => void;
      children?: React.ReactNode;
      className?: string;
    }

    /**
     * Base settings item with title, description, and action
     */
    export function SettingsItem({
      title,
      description,
      icon,
      action,
      onClick,
      children,
      className = '',
    }: SettingsItemProps) {
      const content = (
        <div className="flex items-start gap-4 flex-1">
          {icon && (
            <span className="text-2xl flex-shrink-0 mt-0.5">{icon}</span>
          )}
          <div className="flex-1 min-w-0">
            <h3 className="text-sm font-medium text-gray-900 dark:text-white">
              {title}
            </h3>
            {description && (
              <p className="text-sm text-gray-500 dark:text-gray-400 mt-0.5">
                {description}
              </p>
            )}
            {children}
          </div>
          {action && (
            <div className="flex-shrink-0 ml-4">
              {action}
            </div>
          )}
        </div>
      );

      return (
        <div
          className={`
            bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700
            ${onClick ? 'cursor-pointer hover:border-gray-300 dark:hover:border-gray-600 transition-colors' : ''}
            ${className}
          `}
          onClick={onClick}
        >
          <div className="p-4">
            {content}
          </div>
        </div>
      );
    }

    /**
     * Toggle switch for boolean settings
     */
    export interface SettingsToggleProps {
      label: string;
      description?: string;
      checked: boolean;
      onChange: (checked: boolean) => void;
      disabled?: boolean;
      icon?: string;
    }

    export function SettingsToggle({
      label,
      description,
      checked,
      onChange,
      disabled = false,
      icon,
    }: SettingsToggleProps) {
      return (
        <SettingsItem
          title={label}
          description={description}
          icon={icon}
          action={
            <button
              onClick={() => onChange(!checked)}
              disabled={disabled}
              className={`
                relative inline-flex h-7 w-12 items-center rounded-full transition-colors
                ${checked ? 'bg-blue-600' : 'bg-gray-300 dark:bg-gray-600'}
                ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}
              `}
            >
              <span
                className={`
                  inline-block h-5 w-5 transform rounded-full bg-white shadow-sm transition-transform
                  ${checked ? 'translate-x-6' : 'translate-x-1'}
                `}
              />
            </button>
          }
        />
      );
    }

    /**
     * Select dropdown for enum settings
     */
    export interface SettingsSelectProps {
      label: string;
      description?: string;
      value: string;
      options: { value: string; label: string }[];
      onChange: (value: string) => void;
      icon?: string;
    }

    export function SettingsSelect({
      label,
      description,
      value,
      options,
      icon,
    }: SettingsSelectProps) {
      return (
        <SettingsItem
          title={label}
          description={description}
          icon={icon}
          action={
            <select
              value={value}
              onChange={(e) => onChange(e.target.value)}
              className="px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"
            >
              {options.map((option) => (
                <option key={option.value} value={option.value}>
                  {option.label}
                </option>
              ))}
            </select>
          }
        />
      );
    }

    /**
     * Text input for string settings
     */
    export interface SettingsTextInputProps {
      label: string;
      description?: string;
      value: string;
      onChange: (value: string) => void;
      placeholder?: string;
      type?: 'text' | 'email' | 'password';
      icon?: string;
    }

    export function SettingsTextInput({
      label,
      description,
      value,
      onChange,
      placeholder,
      type = 'text',
      icon,
    }: SettingsTextInputProps) {
      return (
        <SettingsItem
          title={label}
          description={description}
          icon={icon}
          action={
            <input
              type={type}
              value={value}
              onChange={(e) => onChange(e.target.value)}
              placeholder={placeholder}
              className="px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg text-sm text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 w-48"
            />
          }
        />
      );
    }

    /**
     * Settings section container
     */
    export interface SettingsSectionProps {
      title?: string;
      children: React.ReactNode;
    }

    export function SettingsSection({ title, children }: SettingsSectionProps) {
      return (
        <div className="mb-6">
          {title && (
            <h3 className="text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3">
              {title}
            </h3>
          )}
          <div className="space-y-3">
            {children}
          </div>
        </div>
      );
    }

    export default SettingsItem;
    ```

    Save to `apps/portal/src/components/SettingsItem.tsx`.
  </action>
  <verify>SettingsItem components created</verify>
  <done>Settings item components</done>
</task>

<task type="auto">
  <name>Create Settings page</name>
  <files>apps/portal/src/pages/Settings.tsx</files>
  <action>
    Create `apps/portal/src/pages/Settings.tsx`:

    ```typescript
    /**
     * Settings Page
     *
     * Main settings page with Apple-style design.
     */

    import React from 'react';
    import { Routes, Route, Navigate } from 'react-router-dom';
    import { SettingsLayout } from '../components/SettingsLayout';
    import { SettingsSection, SettingsToggle, SettingsItem } from '../components/SettingsItem';

    export function Settings() {
      return (
        <SettingsLayout>
          <Routes>
            <Route path="/" element={<Navigate to="/settings/general" replace />} />
            <Route path="/general" element={<GeneralSettings />} />
            <Route path="/appearance" element={<AppearanceSettings />} />
            <Route path="/annotations" element={<AnnotationsSettings />} />
            <Route path="/integration" element={<IntegrationSettings />} />
            <Route path="/about" element={<AboutSettings />} />
          </Routes>
        </SettingsLayout>
      );
    }

    function GeneralSettings() {
      return (
        <div>
          <h2 className="text-2xl font-semibold text-gray-900 dark:text-white mb-6">
            Geral
          </h2>

          <SettingsSection>
            <SettingsToggle
              label="Notifica√ß√µes"
              description="Receber notifica√ß√µes sobre atualiza√ß√µes e mudan√ßas"
              checked={true}
              onChange={() => {}}
              icon="üîî"
            />
            <SettingsToggle
              label="Som de notifica√ß√£o"
              description="Tocar som ao receber notifica√ß√µes"
              checked={false}
              onChange={() => {}}
              icon="üîä"
            />
          </SettingsSection>

          <SettingsSection title="Idioma">
            <SettingsItem
              title="Idioma"
              description="Selecione o idioma da interface"
              icon="üåê"
              action={
                <select className="px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg text-sm">
                  <option>Portugu√™s (Brasil)</option>
                  <option>English</option>
                  <option>Espa√±ol</option>
                </select>
              }
            />
          </SettingsSection>
        </div>
      );
    }

    function AppearanceSettings() {
      return (
        <div>
          <h2 className="text-2xl font-semibold text-gray-900 dark:text-white mb-6">
            Apar√™ncia
          </h2>

          <SettingsSection>
            <SettingsItem
              title="Tema"
              description="Escolha o tema da aplica√ß√£o"
              icon="üé®"
              action={
                <select className="px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg text-sm">
                  <option>Claro</option>
                  <option>Escuro</option>
                  <option>Autom√°tico (Sistema)</option>
                </select>
              }
            />
          </SettingsSection>

          <SettingsSection title="Cores de destaque">
            <SettingsItem
              title="Cor de destaque"
              description="Cor usada para elementos interativos"
              icon="üíô"
              action={
                <div className="flex gap-2">
                  <button className="w-8 h-8 rounded-full bg-blue-600 ring-2 ring-offset-2 ring-blue-600" />
                  <button className="w-8 h-8 rounded-full bg-purple-600" />
                  <button className="w-8 h-8 rounded-full bg-green-600" />
                  <button className="w-8 h-8 rounded-full bg-orange-600" />
                </div>
              }
            />
          </SettingsSection>
        </div>
      );
    }

    function AnnotationsSettings() {
      return (
        <div>
          <h2 className="text-2xl font-semibold text-gray-900 dark:text-white mb-6">
            Anota√ß√µes
          </h2>

          <SettingsSection>
            <SettingsToggle
              label="Auto-save"
              description="Salvar anota√ß√µes automaticamente enquanto voc√™ edits"
              checked={true}
              onChange={() => {}}
              icon="üíæ"
            />
            <SettingsToggle
              label="Mostrar n√∫meros de linha"
              description="Exibir n√∫meros de linha no editor"
              checked={false}
              onChange={() => {}}
              icon="üî¢"
            />
          </SettingsSection>

          <SettingsSection title="Local de salvamento">
            <SettingsItem
              title="Salvar em"
              description="Onde suas anota√ß√µes s√£o salvas"
              icon="üìÅ"
              action={
                <select className="px-3 py-2 bg-gray-100 dark:bg-gray-700 border-0 rounded-lg text-sm">
                  <option>Vault do Obsidian</option>
                  <option>Nuvem</option>
                  <option>Ambos</option>
                </select>
              }
            />
          </SettingsSection>
        </div>
      );
    }

    function IntegrationSettings() {
      return (
        <div>
          <h2 className="text-2xl font-semibold text-gray-900 dark:text-white mb-6">
            Integra√ß√£o
          </h2>

          <SettingsSection>
            <SettingsItem
              title="Claude Code"
              description="Configurar integra√ß√£o com Claude Code"
              icon="ü§ñ"
              action={
                <button className="text-sm text-blue-600 dark:text-blue-400 font-medium">
                  Configurar
                </button>
              }
            />
            <SettingsToggle
              label="Hook autom√°tico"
              description="Abrir revisor automaticamente ao criar nota"
              checked={true}
              onChange={() => {}}
              icon="‚ö°"
            />
          </SettingsSection>
        </div>
      );
    }

    function AboutSettings() {
      return (
        <div>
          <h2 className="text-2xl font-semibold text-gray-900 dark:text-white mb-6">
            Sobre
          </h2>

          <SettingsSection>
            <SettingsItem
              title="Vers√£o"
              description="Obsidian Note Reviewer"
              icon="‚ÑπÔ∏è"
              action={
                <span className="text-sm text-gray-500 dark:text-gray-400">
                  v1.0.0
                </span>
              }
            />
            <SettingsItem
              title="Licen√ßa"
              description="MIT License"
              icon="üìú"
            />
          </SettingsSection>

          <SettingsSection title="Links">
            <SettingsItem
              title="GitHub"
              description="C√≥digo fonte e issues"
              icon="üîó"
              action={
                <a href="#" className="text-sm text-blue-600 dark:text-blue-400 font-medium">
                  Abrir
                </a>
              }
            />
            <SettingsItem
              title="Documenta√ß√£o"
              description="Guia de uso e API"
              icon="üìö"
              action={
                <a href="#" className="text-sm text-blue-600 dark:text-blue-400 font-medium">
                  Abrir
                </a>
              }
            />
          </SettingsSection>
        </div>
      );
    }

    export default Settings;
    ```

    Save to `apps/portal/src/pages/Settings.tsx`.
  </action>
  <verify>Settings page created with sections</verify>
  <done>Settings page</done>
</task>

</tasks>

<verification>
- [ ] SettingsLayout with sidebar navigation
- [ ] SettingsItem component for individual settings
- [ ] SettingsToggle for boolean values
- [ ] SettingsSelect for dropdowns
- [ ] SettingsTextInput for text input
- [ ] SettingsSection for grouping
- [ ] Settings page with all sections
- [ ] Apple-style design with proper spacing
</verification>

<success_criteria>
1. Settings page with modern Apple-style design (CONF-01)
2. Sidebar navigation with sections
3. Clear labels and descriptions
4. Settings persist to localStorage
</success_criteria>

---

**Plan created:** 2026-02-06
**Estimated duration:** 25 min
**Complexity:** Medium (Apple design patterns, reusable components, routing)
