---
phase: 08-configuration-system
plan: 07
type: execute
wave: 5
depends_on: [08-02, 08-03, 08-04, 08-05, 08-06]
files_modified: [apps/portal/src/App.tsx, apps/portal/src/pages/settings.tsx, apps/portal/src/pages/dashboard.tsx]
autonomous: true

must_haves:
  truths:
    - "/settings and /dashboard routes no longer exist in App.tsx"
    - "SettingsPage.tsx and DashboardPage.tsx files deleted (or deprecated)"
    - "Any /settings or /dashboard navigation redirects to /editor"
    - "All configuration is only accessible via in-editor settings panel"
    - "App functions normally without these routes"
  artifacts:
    - path: "apps/portal/src/App.tsx"
      provides: "Updated routing without /settings and /dashboard"
      contains: "No Route path='/settings', No Route path='/dashboard'"
    - path: "apps/portal/src/pages/settings.tsx"
      provides: "DELETED - settings now in-editor only"
      contains: null
    - path: "apps/portal/src/pages/dashboard.tsx"
      provides: "DELETED - redirects to /editor"
      contains: null
  key_links:
    - from: "legacy /settings URL"
      to: "/editor"
      via: "Navigate component redirect"
      pattern: "Route path='/settings'.*Navigate to='/editor'"
    - from: "legacy /dashboard URL"
      to: "/editor"
      via: "Navigate component redirect"
      pattern: "Route path='/dashboard'.*Navigate to='/editor'"
---

<objective>
Remove the /settings and /dashboard routes (and related page components) as all configuration is now accessible via the in-editor settings panel.

Purpose: Complete the transition from separate settings pages to in-editor configuration by removing legacy routes and pages, with redirects to handle old bookmarks/links.

Output: Cleaned up routing without /settings or /dashboard pages, with redirects to /editor.
</objective>

<execution_context>
@C:\Users\Alex\.claude\get-shit-done\workflows\execute-plan.md
@C:\Users\Alex\.claude\get-shit-done\templates\summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

@.planning/phases/08-configuration-system/plans/08-01-SUMMARY.md
@.planning/phases/08-configuration-system/plans/08-02-SUMMARY.md
@.planning/phases/08-configuration-system/plans/08-06-SUMMARY.md
@apps/portal/src/App.tsx
</context>

<tasks>

<task type="auto">
  <name>Remove /settings and /dashboard routes from App.tsx</name>
  <files>apps/portal/src/App.tsx</files>
  <action>
Update apps/portal/src/App.tsx to remove the /settings and /dashboard routes:

1. First, read the current App.tsx to see the exact structure

2. Remove the /dashboard route (lines 70-79):
```tsx
// DELETE THIS SECTION:
<Route
  path="/dashboard"
  element={
    <ProtectedRoute>
      <Layout>
        <DashboardPage />
      </Layout>
    </ProtectedRoute>
  }
/>
```

3. Replace with redirect to /editor:
```tsx
{/* Redirect legacy /dashboard to /editor */}
<Route path="/dashboard" element={<Navigate to="/editor" replace />} />
```

4. Remove the /settings route (lines 97-105):
```tsx
// DELETE THIS SECTION:
<Route
  path="/settings"
  element={
    <ProtectedRoute>
      <Layout>
        <SettingsPage />
      </Layout>
    </ProtectedRoute>
  }
/>
```

5. Replace with redirect to /editor:
```tsx
{/* Redirect legacy /settings to /editor */}
<Route path="/settings" element={<Navigate to="/editor" replace />} />
```

6. Update the default redirect (line 108):
```tsx
// OLD:
<Route path="/" element={<Navigate to="/dashboard" replace />} />

// NEW:
<Route path="/" element={<Navigate to="/editor" replace />} />
```

7. Also update the catch-all redirect (line 114):
```tsx
// OLD:
<Route path="*" element={<Navigate to="/dashboard" replace />} />

// NEW:
<Route path="*" element={<Navigate to="/editor" replace />} />
```

8. Remove the imports for DashboardPage and SettingsPage (lines 11-12):
```tsx
// DELETE:
import { DashboardPage } from './pages/dashboard'
import { SettingsPage } from './pages/settings'
```

9. Also remove the Layout import if it's only used by these routes (check if it's used elsewhere):
```tsx
// If Layout is only used by dashboard/settings, DELETE:
import { Layout } from './components/Layout'
```
  </action>
  <verify>App.tsx no longer imports DashboardPage, SettingsPage, or Layout; /settings and /dashboard routes redirect to /editor</verify>
  <done>Legacy settings and dashboard routes removed from App.tsx with redirects to /editor</done>
</task>

<task type="auto">
  <name>Delete or deprecate settings and dashboard page components</name>
  <files>apps/portal/src/pages/settings.tsx, apps/portal/src/pages/dashboard.tsx</files>
  <action>
Handle the legacy page component files:

1. Check if these files exist:
   - apps/portal/src/pages/settings.tsx
   - apps/portal/src/pages/dashboard.tsx

2. If they exist, delete them:
```bash
# If files exist, delete them
rm C:/dev/tools/obsidian-note-reviewer/apps/portal/src/pages/settings.tsx
rm C:/dev/tools/obsidian-note-reviewer/apps/portal/src/pages/dashboard.tsx
```

3. Also check for and delete any related files:
   - apps/portal/src/pages/Settings.tsx (capitalized)
   - apps/portal/src/pages/Dashboard.tsx (capitalized)
   - apps/portal/src/components/Layout.tsx (if only used by deleted routes)

4. Verify the pages directory structure:
```bash
ls -la C:/dev/tools/obsidian-note-reviewer/apps/portal/src/pages/
```

These files are no longer needed since all configuration is done through the in-editor settings panel.
  </action>
  <verify>settings.tsx and dashboard.tsx files do not exist in apps/portal/src/pages/</verify>
  <done>Legacy page component files deleted</done>
</task>

<task type="auto">
  <name>Test redirects and verify app functionality</name>
  <files>apps/portal/src/App.tsx</files>
  <action>
Verify the routing changes work correctly:

1. Check for any other references to /dashboard or /settings:
   - Search for "/dashboard" in the codebase
   - Search for "/settings" in the codebase
   - Update any navigation links that reference these routes

2. Verify the routing structure:
```tsx
// Final routing should look like:
<Routes>
  {/* Public routes */}
  <Route path="/auth/login" element={<LoginPage />} />
  <Route path="/auth/signup" element={<SignupPage />} />
  <Route path="/auth/forgot-password" element={<ForgotPasswordPage />} />
  <Route path="/auth/reset-password" element={<ResetPasswordPage />} />
  <Route path="/auth/callback" element={<CallbackPage />} />

  {/* Main editor - the primary route */}
  <Route path="/editor" element={<ProtectedRoute><EditorApp /></ProtectedRoute>} />
  <Route path="/welcome" element={<ProtectedRoute><WelcomePage /></ProtectedRoute>} />

  {/* Redirect legacy routes */}
  <Route path="/dashboard" element={<Navigate to="/editor" replace />} />
  <Route path="/settings" element={<Navigate to="/editor" replace />} />

  {/* Default redirect */}
  <Route path="/" element={<Navigate to="/editor" replace />} />

  {/* Public shared document */}
  <Route path="/shared/:slug" element={<SharedDocument />} />

  {/* Catch all */}
  <Route path="*" element={<Navigate to="/editor" replace />} />
</Routes>
```

3. Note about redirecting with settings open:
   - If you want /settings to open editor with settings panel, you would need:
   ```tsx
   <Route
     path="/settings"
     element={
       <Navigate
         to="/editor"
         state={{ openSettings: true }}
         replace
       />
     }
   />
   ```
   - And in EditorApp.tsx, handle location.state:
   ```tsx
   const location = useLocation();
   useEffect(() => {
     if (location.state?.openSettings) {
       setIsSettingsPanelOpen(true);
     }
   }, [location.state]);
   ```
   - This is optional - the simple redirect to /editor is sufficient for now

4. Document the change:
   - All configuration is now in-editor only
   - Old URLs redirect to /editor
   - No separate settings/dashboard pages exist
  </action>
  <verify>App.tsx routing is clean, all /dashboard and /settings references updated to /editor or redirects</verify>
  <done>Routing updated and verified, app functions correctly without legacy routes</done>
</task>

</tasks>

<verification>
After completion, verify:
1. /settings URL redirects to /editor
2. /dashboard URL redirects to /editor
3. / URL redirects to /editor
4. SettingsPage and DashboardPage files are deleted
5. Layout component is deleted if no longer used
6. App.tsx has no references to deleted pages
7. Navigation to /editor still works
8. In-editor settings panel opens and functions correctly
</verification>

<success_criteria>
1. /settings and /dashboard routes removed
2. Redirects to /editor in place
3. Legacy page component files deleted
4. App functions normally with new routing
5. All configuration is in-editor only
</success_criteria>

<output>
After completion, create `.planning/phases/08-configuration-system/plans/08-07-SUMMARY.md` with:
- Routes removed
- Files deleted
- Redirects implemented
- Any edge cases handled
- Verification that app functions correctly
</output>
